/*****************************************************************************

    FILE NAME:     Charger.c

    DESCRIPTION:   Charger board initialization,measurements and control functions
    AUTHOR:        Bibin Paul
    Property of Intelliquip
*****************************************************************************/

/*****************************************************************************
        INCLUDE FILES
*****************************************************************************/
#include "Display.h"
#include "LTC2943.h"
#include "charger.h"
#include "my_string.h"
/****************************************************************************
        GLOBAL VARIABLES
*****************************************************************************/

unsigned char txt[16];
 unsigned char bar=0;
 
 extern float Rsense;
 extern float ChargeConst;
 extern float Rmultiplier;

 unsigned char PercentVoltFlag=0;
/****************************************************************************
       LOCAL CONSTANTS
*****************************************************************************/

const code char CAR_31x16[62] = {
254,   3, 253, 253, 253, 253, 253,  13, 245, 245, 245, 205, 253,  13, 245, 245, 245,  13, 253,   5, 245, 245, 245,  13, 253, 253, 253, 253, 253,   3, 254,
127, 192, 191, 191, 191, 191, 191, 176, 175, 175, 175, 179, 191, 160, 190, 190, 190, 160, 191, 160, 190, 188, 186, 167, 191, 191, 191, 191, 191, 192, 127};
const code char MAINS_31x16[62] = {
254,   3, 253,   5, 237,  29, 237,   5, 253,  13, 245, 245, 245,  13, 253,   5, 253,   5, 189, 125, 253,   5, 253, 141, 117, 245, 245, 205, 253,   3, 254,
127, 192, 191, 160, 191, 191, 191, 160, 191, 160, 190, 190, 190, 160, 191, 160, 191, 160, 191, 191, 190, 160, 191, 179, 175, 174, 173, 179, 191, 192, 127};
const code char SOLAR_31x16[62] = {
254,   3, 253,  13, 245, 245, 205, 253,  13, 245, 245,  13, 253,   5, 253, 253, 253, 253,  13, 245, 245,  13, 253,  13, 245, 245,  13, 253, 253,   3, 254,
127, 192, 191, 179, 174, 173, 179, 191, 176, 175, 175, 176, 191, 160, 175, 175, 175, 191, 160, 190, 190, 160, 191, 160, 188, 186, 167, 191, 191, 192, 127};

const code char OFF_31x16[62] = {
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};



const code char BATT_31x16[62] = {
254,   3, 253, 253,   5, 245, 245, 245,  13, 253,  13, 245, 245, 245,  13, 253, 245, 245,   5, 245, 245, 253, 245, 245,   5, 245, 245, 253, 253,   3, 254,
127, 192, 191, 191, 160, 174, 174, 174, 177, 191, 160, 190, 190, 190, 160, 191, 191, 191, 160, 191, 191, 191, 191, 191, 160, 191, 191, 191, 191, 192, 127};

const code char MPPT_31x12[62] = {
254,   3, 253,   5, 237, 221, 237,   5, 253, 253,   5, 181, 181, 181, 205, 253, 253,   5, 181, 181, 181, 205, 253, 245, 245,   5, 245, 245, 253,   3, 254,
  7,  12,  11,  10,  11,  11,  11,  10,  11,  11,  10,  11,  11,  11,  11,  11,  11,  10,  11,  11,  11,  11,  11,  11,  11,  10,  11,  11,  11,  12,   7
};

const code char CLEAR_MPPT_31x12[62] = {
  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0
};




const code char Batt_0_50x32[200] = {
252, 252, 252, 252,  60,  63,  63,  63,  63,  63,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  60,  63,  63,  63,  63,  63, 252, 252, 252,   0,
  0,   0, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255,   0,   0,
  0,   0, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255,   0,   0,
240, 240, 255, 255, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 224, 255, 255, 248,   0};

const code char SOLAR_56x16[112] = {
254, 255,  31, 239, 239, 239, 159, 255, 255,  31, 239,  31, 255, 255,  15, 111, 111, 159, 255, 255, 255, 255, 255,  15, 255, 255, 255, 159, 111, 239, 223, 255,  31, 207, 239, 207,  31, 255, 255,  15, 255, 255, 255, 255,  31, 239,  31, 255, 255,  15, 111, 111, 159, 255, 255, 254,
127, 255, 248, 247, 247, 247, 249, 255, 243, 252, 253, 252, 243, 255, 240, 255, 252, 243, 255, 255, 255, 255, 240, 255, 255, 255, 255, 251, 247, 246, 249, 255, 248, 243, 247, 243, 248, 255, 255, 240, 247, 255, 255, 243, 252, 253, 252, 243, 255, 240, 255, 252, 243, 255, 255, 127};


const code char CHARGE_L_7x16[14] = {
  0, 224, 252, 255, 192, 192, 192,
  3,   3,   3, 255,  63,   7,   0
};
const code char CHARGE_M_7x16[14] = {
  0, 128, 240, 252, 192, 192,  64,
  2,   3,   3,  63,  15,   1,   0
};

const code char CHARGE_S_7x16[14] = {
  0,   0, 224, 248, 192, 192,   0,
  0,   3,   3,  31,   7,   0,   0
};


const code char CHARGE_B_7x16[14] = {
0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0
};

const code char Sourceinfo_112x48[672] = {
252, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   7,   3,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   3,   6, 252,
255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255,
255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255,
255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255,
255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255,
 63, 127, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 224, 192, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 192,  96,  63
};
const code char Battinfo[520] = {
252, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   3,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   2, 252,
255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255,
255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255,
255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255,
  1,   3,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   6,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   2,   1
};
const code char Battinfo1[600] = {
252, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   3,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   2, 252,
255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255,
255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255,
255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255,
  1,   3,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   7,   6,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   4,   2,   1
};

const code char Time_18x24[54] = {
  3,  63, 255, 195,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3, 195, 255,  63,   3,
  0,   0,   0, 129, 231,  60,  24,   0,   0,   0,   0,  24,  60, 231, 129,   0,   0,   0,
192, 252, 255, 195, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 195, 255, 252, 192
};

const code char battery_level[222] = {
  0, 224, 224,  96,  96,  96,  96,  96,   0,   0,   0,   0,  30, 254, 246,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6, 254, 254,  32, 224, 128,   0,   0,   0, 224, 224,  96,  96,  96,  96,  96,   0,
  0, 255, 255, 140, 140, 140, 128, 128,   0,   0,   0,   0, 128, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255,  64, 127,  31,   0,   0,   0, 255, 255,  12,  12,  12,   0,   0,   0,
  0,   1,   1,   1,   1,   1,   1,   1,   0,   0,   0,   0,   7,   7,   7,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   6,   7,   7,   0,   0,   0,   0,   0,   0,   1,   1,   0,   0,   0,   0,   0,   0
};


const code char BattBar_4x12[8] = {
  0, 255, 255, 255,
  0,  15,  15,  15
};
const code char BattBar1_4x12[8] = {
  0,  0,  0,  0,
  0,  0,  0,  0
};

const code char BattBar2_8x12[16] = {
  0,  0,  0,  0,   0,  0,  0,  0,
  0,  0,  0,  0,   0,  0,  0,  0,
};

const code char BattBar2b_8x12[16] = {
  0, 255, 255, 255,   0, 255, 255, 255,
  0,  15,  15,  15,   0,  15,  15,  15
};
const code char batt_level[102] = {
  7, 255, 255,   7,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   7, 255, 255,  12, 252, 224,
 56,  63,  63,  56,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  48,  56,  63,  63,  12,  15,   1
};


const code char BLx[11][39] = {
     0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
   255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
   255, 255, 255,   0, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
   255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
   255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
   255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
   255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
   255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
   255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,
   255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0,   0,   0,   0,
   255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255,   0, 255, 255, 255
} ;



//Message for battery types
const code char Type_108x16[216] = {
255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 195, 189, 189, 189, 123, 255,   1, 189, 189, 253, 253, 255, 253, 253,   1, 253, 253, 255, 255, 255,   1, 189, 189, 189,  67, 255,   7, 187, 189, 187,   7, 255, 253, 253,   1, 253, 253, 255, 253, 253,   1, 253, 253, 255,   1, 189, 189, 189, 253, 255,   1, 189,  61, 189, 195, 255, 193, 191, 191, 191,   1, 255, 255, 255, 255, 253, 253,   1, 253, 253, 255, 193, 191, 191, 191,   1, 255,   1, 189, 189, 189, 195, 255,   1, 189, 189, 189, 253, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
 31,  31,  31,  31,  31,  31,  31,  31,  31,  31,  27,  23,  23,  23,  24,  31,  16,  23,  23,  23,  23,  31,  31,  31,  16,  31,  31,  31,  31,  31,  16,  23,  23,  23,  24,  31,  16,  31,  31,  31,  16,  31,  31,  31,  16,  31,  31,  31,  31,  31,  16,  31,  31,  31,  16,  23,  23,  23,  23,  31,  16,  31,  31,  30,  17,  31,  27,  23,  23,  23,  24,  31,  31,  31,  31,  31,  31,  16,  31,  31,  31,  27,  23,  23,  23,  24,  31,  16,  31,  31,  31,  31,  31,  16,  23,  23,  23,  23,  31,  31,  31,  31,  31,  31,  31,  31,  31,  31
};




const code char AGM_44x15[88] = {
254,   3, 253, 253, 253, 253, 253, 253, 253, 253,  13, 101, 117, 101,  13, 253, 253, 253,   5, 245, 245, 245, 253, 253, 253, 253,   5, 205, 157, 205,   5, 253, 253, 253, 253, 253, 253, 253, 253, 253, 253, 253,   3, 254,
 63,  96,  95,  95,  95,  95,  95,  95,  95,  95,  80,  95,  95,  95,  80,  95,  95,  95,  80,  87,  87,  86,  80,  95,  95,  95,  80,  95,  95,  95,  80,  95,  95,  95,  95,  95,  95,  95,  95,  95,  95,  95,  96,  63
};
const code char LeadAcid_44x15[88] = {
254,   3, 253,   5, 253, 253, 253, 253,   5, 117, 117, 245, 253,  13, 117, 117,  13, 253,   5, 245, 245,  13, 253, 253, 253,  13, 117, 117,  13, 253,  13, 245, 245, 205, 253,   5, 253,   5, 245, 245,  13, 253,   3, 254,
 63,  96,  95,  80,  87,  87,  87,  95,  80,  87,  87,  87,  95,  80,  95,  95,  80,  95,  80,  87,  87,  88,  95,  95,  95,  80,  95,  95,  80,  95,  88,  87,  87,  89,  95,  80,  95,  80,  87,  87,  88,  95,  96,  63
};
const code char Lithium_44x15[88] = {
254,   3, 253,   5, 253, 253, 253, 253, 245,   5, 245, 253, 253, 245, 245,   5, 245, 245, 253,   5, 125, 125, 125,   5, 253, 245,   5, 245, 253,   5, 253, 253, 253,   5, 253, 253,   5, 237,  29, 237,   5, 253,   3, 254,
 63,  96,  95,  80,  87,  87,  87,  95,  87,  80,  87,  95,  95,  95,  95,  80,  95,  95,  95,  80,  95,  95,  95,  80,  95,  87,  80,  87,  95,  88,  83,  87,  83,  88,  95,  95,  80,  95,  95,  95,  80,  95,  96,  63
};

const code char GEL_44x15[88] = {
254,   3, 253, 253, 253, 253, 253, 253, 253, 253,   5, 245, 245, 245, 253, 253, 253, 253,   5, 117, 117, 117, 245, 253, 253, 253,   5, 253, 253, 253, 253, 253, 253, 253, 253, 253, 253, 253, 253, 253, 253, 253,   3, 254,
 63,  96,  95,  95,  95,  95,  95,  95,  95,  95,  80,  87,  87,  86,  80,  95,  95,  95,  80,  87,  87,  87,  87,  95,  95,  95,  80,  87,  87,  87,  87,  95,  95,  95,  95,  95,  95,  95,  95,  95,  95,  95,  96,  63
};
const code char Calcium_44x15[88] = {
254,   3, 253,  13, 245, 245, 245, 205, 253,  29, 109, 117, 109,  29, 253,   5, 253, 253, 253, 253,  13, 245, 245, 245, 205, 253, 245,   5, 245, 253,   5, 253, 253, 253,   5, 253,   5, 237,  29, 237,   5, 253,   3, 254,
 63,  96,  95,  88,  87,  87,  87,  89,  95,  80,  95,  95,  95,  80,  95,  80,  87,  87,  87,  95,  88,  87,  87,  87,  89,  95,  87,  80,  87,  95,  88,  83,  87,  83,  88,  95,  80,  95,  95,  95,  80,  95,  96,  63
};

const code char Default_44x15[88] = {  //modified to unknown
254,   3, 253,   5, 253, 253,   5, 253,   5, 189, 125, 253,   5, 253,   5, 125, 189, 197, 253,   5, 189, 125, 253,   5, 253,  13, 245, 245,  13, 253,   5, 253, 253, 253,   5, 253,   5, 189, 125, 253,   5, 253,   3, 254,
 63,  96,  95,  88,  87,  87,  88,  95,  80,  95,  95,  94,  80,  95,  80,  95,  94,  81,  95,  80,  95,  95,  94,  80,  95,  88,  87,  87,  88,  95,  80,  91,  93,  91,  80,  95,  80,  95,  95,  94,  80,  95,  96,  63
};

const code char Save_44x15[88] = {
254,   3, 253, 253, 253, 253, 253, 141, 117, 117, 117, 237, 253, 253, 253, 253,  29, 237, 245, 237,  29, 253, 253, 253, 253,   5, 253, 253, 253,   5, 253, 253, 253, 253,   5, 117, 117, 245, 253, 253, 253, 253,   3, 254,
 63,  96,  95,  95,  95,  95,  95,  91,  87,  87,  87,  88,  95,  95,  95,  95,  80,  94,  94,  94,  80,  95,  95,  95,  95,  92,  91,  87,  91,  92,  95,  95,  95,  95,  80,  87,  87,  87,  95,  95,  95,  95,  96,  63
};
//Amp Hours settings
const code char Capacity_108x16[216] = {
255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 195, 189, 189, 189, 123, 255,   1, 189, 189, 253, 253, 255, 253, 253,   1, 253, 253, 255, 255, 255,   1, 189, 189, 189,  67, 255,   7, 187, 189, 187,   7, 255, 253, 253,   1, 253, 253, 255, 253, 253,   1, 253, 253, 255,   1, 189, 189, 189, 253, 255,   1, 189,  61, 189, 195, 255, 193, 191, 191, 191,   1, 255, 255, 255, 255, 255, 255, 255,  15,   7,  99, 113, 121, 113,  99,   7,  15, 255, 255,   1,   1,  63,  31, 159,  31,  63, 127, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
 31,  31,  31,  31,  31,  31,  31,  31,  31,  31,  27,  23,  23,  23,  24,  31,  16,  23,  23,  23,  23,  31,  31,  31,  16,  31,  31,  31,  31,  31,  16,  23,  23,  23,  24,  31,  16,  31,  31,  31,  16,  31,  31,  31,  16,  31,  31,  31,  31,  31,  16,  31,  31,  31,  16,  23,  23,  23,  23,  31,  16,  31,  31,  30,  17,  31,  27,  23,  23,  23,  24,  31,  31,  31,  31,  31,  31,  31,  16,  16,  30,  30,  30,  30,  30,  16,  16,  31,  31,  16,  16,  30,  31,  31,  31,  30,  16,  16,  31,  31,  31,  31,  31,  31,  31,  31,  31,  31
};

//Plus sign
const code char Plus_16x16[32] = {
252,   6, 250, 250, 122, 122, 122,  10,  10, 122, 122, 122, 250, 250,   6, 252,
127, 192, 191, 191, 190, 190, 190, 176, 176, 190, 190, 190, 191, 191, 192, 127
};
//Minus sign
const code char Minus_16x16[32] = {
252,   6, 250, 250, 122, 122, 122, 122, 122, 122, 122, 122, 250, 250,   6, 252,
127, 192, 191, 191, 190, 190, 190, 190, 190, 190, 190, 190, 191, 191, 192, 127
};
//Text box
const code char AHbox_32x16[64] = {
254,   2, 250,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10, 250,   2, 254,
255, 128, 191, 160, 160, 160, 160, 160, 160, 160, 160, 160, 160, 160, 160, 160, 160, 160, 160, 160, 160, 160, 160, 160, 160, 160, 160, 160, 160, 191, 128, 255
};

const code char Yes_24x16[48] = {
252,   6, 250,  10, 250, 250, 250,  10, 250, 250,  10, 234, 234, 234, 250, 250,  26, 234, 234, 234, 218, 250,   6, 252,
127, 192, 191, 183, 174, 174, 174, 176, 191, 191, 160, 174, 174, 175, 191, 191, 183, 174, 174, 174, 177, 191, 192, 127
};
const code char No_24x16[48] = {
252,   6, 250, 250, 250,  10, 186, 122, 250, 250,  10, 250, 250,  26, 234, 234, 234, 234,  26, 250, 250, 250,   6, 252,
127, 192, 191, 191, 191, 160, 191, 191, 190, 189, 160, 191, 191, 176, 175, 175, 175, 175, 176, 191, 191, 191, 192, 127
};
const code char UsrSetup_108x16[216] = {
255, 255, 255, 255, 255, 255,   1, 223, 191, 127, 255,   1, 255,   1, 189, 189, 253, 253, 255,   1, 255, 127, 255,   1, 255, 255, 255, 255,   1, 189, 189, 189,  67, 255,   7, 187, 189, 187,   7, 255, 253, 253,   1, 253, 253, 255, 253, 253,   1, 253, 253, 255,   1, 189, 189, 189, 253, 255,   1, 189,  61, 189, 195, 255, 193, 191, 191, 191,   1, 255, 255, 255, 255, 195, 189, 189, 189, 115, 255,   1, 189, 189, 189, 253, 255, 253, 253,   1, 253, 253, 255,   1, 255, 255, 255,   1, 255,   1, 189, 189, 189, 195, 255, 255, 255, 255, 255, 255,
 31,  31,  31,  31,  31,  31,  16,  31,  31,  31,  30,  16,  31,  16,  23,  23,  23,  23,  31,  16,  27,  28,  27,  16,  31,  31,  31,  31,  16,  23,  23,  23,  24,  31,  16,  31,  31,  31,  16,  31,  31,  31,  16,  31,  31,  31,  31,  31,  16,  31,  31,  31,  16,  23,  23,  23,  23,  31,  16,  31,  31,  30,  17,  31,  27,  23,  23,  23,  24,  31,  31,  31,  31,  25,  23,  23,  23,  24,  31,  16,  23,  23,  23,  23,  31,  31,  31,  16,  31,  31,  31,  24,  23,  23,  23,  24,  31,  16,  31,  31,  31,  31,  31,  31,  31,  31,  31,  31
};
const code char InverterSetup_108x16[216] = {
255, 255, 255,   1, 223, 191, 127, 255,   1, 255,   1, 189, 189, 253, 253, 255,   1, 255, 127, 255,   1, 255, 255, 255, 255, 255,   1, 255, 255,   1, 223, 191, 127, 255,   1, 255,   1, 255, 255, 255,   1, 255,   1, 189, 189, 189, 253, 255,   1, 189,  61, 189, 195, 255, 253, 253,   1, 253, 253, 255,   1, 189, 189, 189, 253, 255,   1, 189,  61, 189, 195, 255, 255, 255, 255, 255, 195, 189, 189, 189, 115, 255,   1, 189, 189, 189, 253, 255, 253, 253,   1, 253, 253, 255,   1, 255, 255, 255,   1, 255,   1, 189, 189, 189, 195, 255, 255, 255,
 31,  31,  31,  16,  31,  31,  31,  30,  16,  31,  16,  23,  23,  23,  23,  31,  16,  27,  28,  27,  16,  31,  31,  31,  31,  31,  16,  31,  31,  16,  31,  31,  31,  30,  16,  31,  28,  27,  23,  27,  28,  31,  16,  23,  23,  23,  23,  31,  16,  31,  31,  30,  17,  31,  31,  31,  16,  31,  31,  31,  16,  23,  23,  23,  23,  31,  16,  31,  31,  30,  17,  31,  31,  31,  31,  31,  25,  23,  23,  23,  24,  31,  16,  23,  23,  23,  23,  31,  31,  31,  16,  31,  31,  31,  24,  23,  23,  23,  24,  31,  16,  31,  31,  31,  31,  31,  31,  31
};


const code char LargeFont80x16[17][16] = {
  0, 248, 252,  12,  12,  12, 252, 248,   
  0,  31,  63,  48,  48,  48,  63,  31,
  
  0,   0,  24,  28, 252, 252,   0,   0,  
  0,  48,  48,  48,  63,  63,  48,  48,
  
  0,  12, 140, 140, 140, 140, 252, 248,
  0,  31,  63,  49,  49,  49,  49,  48,
  
  0,  12, 140, 140, 140, 140, 252, 252,  
  0,  48,  49,  49,  49,  49,  63,  63,
   
  0, 252, 252, 128, 128, 128, 252, 252,   
  0,   1,   1,   1,   1,   1,  63,  63,
  
  0, 248, 252, 140, 140, 140, 140,  12,
  0,  48,  49,  49,  49,  49,  63,  31,
     
  0, 248, 252, 140, 140, 140, 140,  12,
  0,  31,  63,  49,  49,  49,  63,  31,
     
  0,  12,  12,  12,  12,  12, 252, 248, 
  0,   0,   0,   0,   0,   0,  63,  63,
    
  0, 248, 252, 140, 140, 140, 252, 248, 
  0,  31,  63,  49,  49,  49,  63,  31,
    
  0, 248, 252, 140, 140, 140, 252, 248,     //9
  0,   0,   1,   1,   1,   1,  63,  63,
  
  0,   0,   0,   0,   0,   0,   0,   0,     //space
  0,   0,   0,   0,   0,   0,   0,   0,
  
  0,   0,   0,   0,   0,   0,   0,   0,     //dp
  0,   0,   0,   0,  56,  40,  56,   0,

  0,  28,  20,  28, 192, 240,  60,  12,      //%
  0,  48,  60,  15,   3,  56,  40,  56,

  0, 252, 252,   0,   0,   0, 252, 252,
  0,   3,  15,  30,  56,  30,  15,   3,  //V
  
  0, 248, 252, 140, 140, 140, 252, 248,
  0,  63,  63,   1,   1,   1,  63,  63,  //A

  0, 252, 252, 128, 128, 128, 128,   0,  //h
  0,  63,  63,   1,   1,   1,  63,  63,

  0,   0, 128, 128, 224, 224, 128, 128,   //+
  0,   0,   1,   1,   7,   7,   1,   1,

};


const code char Info16x16[32] ={
  192, 240, 124,  30,   6,   3, 179, 179, 179,   3,   6,  30, 124, 240, 192,   0,
  3,  15,  62, 120,  96, 192, 207, 207, 207, 192,  96, 120,  62,  15,   3,   0
};



const code char LED31x16[62] = {
254,   3, 253, 253,   5,   5, 253, 253, 253, 253, 253, 253,   5,   5, 101, 101, 101, 229, 253, 253,   5,   5, 229, 229, 197,  13,  29, 253, 253,   3, 254,
127, 192, 191, 191, 160, 160, 167, 167, 167, 167, 191, 191, 160, 160, 166, 166, 166, 167, 191, 191, 160, 160, 167, 167, 163, 176, 184, 191, 191, 192, 127
};

const code char UPDN16x32[64] = {
254,   3, 253, 253,  61,  61,  61,   5,   5,  61,  61,  61, 253, 253,   3, 254,
191,  96,  95,  95,  95,  95,  95,  88,  88,  95,  95,  95,  95,  95,  96, 191,
253,   6, 250, 250, 122, 122, 122, 122, 122, 122, 122, 122, 250, 250,   6, 253,
127, 192, 191, 191, 190, 190, 190, 190, 190, 190, 190, 190, 191, 191, 192, 127
};

const code char BLANK_UPDN16x32[64] = {
0,  0, 0, 0,0,  0, 0, 0,0,  0, 0, 0,0,  0, 0, 0,
0,  0, 0, 0,0,  0, 0, 0,0,  0, 0, 0,0,  0, 0, 0,
0,  0, 0, 0,0,  0, 0, 0,0,  0, 0, 0,0,  0, 0, 0,
0,  0, 0, 0,0,  0, 0, 0,0,  0, 0, 0,0,  0, 0, 0,
};

const code char iINFO124x56[868] = {
252, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   7,   7,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   3,   7,   7, 254, 252,
255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255,
255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255,
255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255,
255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255,
255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255,
 63, 127, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 224, 224, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 192, 224, 224, 127,  63
};

const code char LCD_DUMMY[1024] = {
  254,   3, 253,   5, 237,  29, 237,   5, 253,  13, 245, 245, 245,  13, 253,   5, 253,   5, 189, 125, 253,   5, 253, 141, 117, 245, 245, 205, 253,   3, 254,   0,   0,   0,   0,   0, 128, 240, 252, 192, 192,  64,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 254,   3, 253, 253,   5,   5, 253, 253, 253, 253, 253, 253,   5,   5, 101, 101, 101, 229, 253, 253,   5,   5, 229, 229, 197,  13,  29, 253, 253,   3, 254,
  127, 192, 191, 160, 191, 191, 191, 160, 191, 160, 190, 190, 190, 160, 191, 160, 191, 160, 191, 191, 190, 160, 191, 179, 175, 174, 173, 179, 191, 192, 127,   0,   0,   0,   0,   2,   3,   3,  63,  15,   1,   0,   0,   0,   0,   0,   0,   0,   0, 128, 192, 192, 192, 192, 192, 192, 128,   0,   0,   0, 128, 192, 192, 192, 192, 192, 192, 128,   0,   0,   0,   0,   0,   0, 192, 192,   0,   0,   0, 192, 192,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 127, 192, 191, 191, 160, 160, 167, 167, 167, 167, 191, 191, 160, 160, 166, 166, 166, 167, 191, 191, 160, 160, 167, 167, 163, 176, 184, 191, 191, 192, 127,
  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 240, 248,  24,  24,  24,  24,  31,  15,   0,   0,   0, 255, 255,   0,   0,   0,   0, 255, 255,   0,   0,   0,   0,   0,   0,   0, 192, 240, 124,  31,   7,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 248,  12, 244, 244, 244, 244, 244,  20,  20, 244, 244, 244, 244, 244,  12, 248,
  0,   0, 192, 240, 124,  30,   6,   3, 179, 179, 179,   3,   6,  30, 124, 240, 192,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 192, 192, 192, 192, 192, 192, 192, 193, 195, 195, 195, 195, 195, 195, 193, 192, 192, 192, 193, 195, 195, 195, 195, 195, 195, 193, 192, 192, 192, 192, 192, 192, 195, 195, 193, 192, 192, 195, 195, 192, 192, 192, 192, 192, 192, 192, 192, 192,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 128, 127, 127, 124, 124, 124,  96,  96, 124, 124, 124, 127, 127, 128, 255,
  0,   0,   3,  15,  62, 120,  96, 192, 207, 207, 207, 192,  96, 120,  62,  15,   3,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   1, 255, 255,   1,   0, 254, 254,   0, 254, 254,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   1, 255, 255,   3, 255, 120,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1, 255,
  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  14,  15,  15,  14,  12,  13,  13,  12,  13,  13,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  12,  14,  15,  15,   3,   3,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255,   3, 253, 253,  61,  61,  61,  61,  61,  61,  61,  61, 253, 253,   3, 255,
  0,   0,   0,   0,   0, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  63,  96,  95,  95,  95,  95,  95,  95,  95,  95,  95,  95,  95,  95,  96,  63,
  0,   0,   0,   0,   0, 127,  64,  94,  94,  94,  94,  94,  94,  94,  94,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64,  64, 127,   0,   0,   0,   0,  79,  73,  73, 121,   0,  64,   0,  15,   8, 124,   8,   0,   0,   0, 127,   8,   8, 127,   0,  62,  65,  65,  65,  62,   0,  63,  64,  64,  63,   0, 127,  25,  41,  70,   0,  38,  73,  73,  58,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0
};

 const code char LOAD[6][38]={
   255, 129, 129, 129, 129, 129, 129, 129, 195, 129, 129, 129, 129, 129, 129, 195, 129, 129, 129, 129, 129, 129, 195, 129, 129, 129, 129, 129, 129, 195, 129, 129, 129, 129, 129, 129, 129, 255,
   255, 129, 189, 189, 189, 189, 189, 189, 195, 129, 129, 129, 129, 129, 129, 195, 129, 129, 129, 129, 129, 129, 195, 129, 129, 129, 129, 129, 129, 195, 129, 129, 129, 129, 129, 129, 129, 255,
   255, 129, 189, 189, 189, 189, 189, 189, 195, 189, 189, 189, 189, 189, 189, 195, 129, 129, 129, 129, 129, 129, 195, 129, 129, 129, 129, 129, 129, 195, 129, 129, 129, 129, 129, 129, 129, 255,
   255, 129, 189, 189, 189, 189, 189, 189, 195, 189, 189, 189, 189, 189, 189, 195, 189, 189, 189, 189, 189, 189, 195, 129, 129, 129, 129, 129, 129, 195, 129, 129, 129, 129, 129, 129, 129, 255,
   255, 129, 189, 189, 189, 189, 189, 189, 195, 189, 189, 189, 189, 189, 189, 195, 189, 189, 189, 189, 189, 189, 195, 189, 189, 189, 189, 189, 189, 195, 129, 129, 129, 129, 129, 129, 129, 255,
   255, 129, 189, 189, 189, 189, 189, 189, 195, 189, 189, 189, 189, 189, 189, 195, 189, 189, 189, 189, 189, 189, 195, 189, 189, 189, 189, 189, 189, 195, 189, 189, 189, 189, 189, 189, 129, 255
 };







 unsigned char PrevMenuState=0;
 unsigned char ChargeSize=0;
 unsigned char LowBattStartup=0;

/****************************************************************************
        LOCAL MACROS
*****************************************************************************/
//NONE

/****************************************************************************
        LOCAL FUNCTIONS
*****************************************************************************/
//NONE


/****************************************************************************
FUNCTION: SetBacklight

DESCRIPTION:
    Function to adjust the brightness of LCD backlight

ARGUMENTS:

     NONE
RETURN VALUE:

    NONE


PRE-CONDITIONS:
   NONE

POST-CONDITIONS:
    NONE

IMPORTANT NOTES:
   None


*****************************************************************************/
 void SetBacklight(){
 
 
 
 
 }


/****************************************************************************
FUNCTION: Display_Battery

DESCRIPTION:
    Function to display battery status on LCD

ARGUMENTS:

     NONE
RETURN VALUE:

    NONE


PRE-CONDITIONS:
   NONE

POST-CONDITIONS:
    NONE

IMPORTANT NOTES:
   None

 
*****************************************************************************/

void DisplayBattery(){

  unsigned char pos=0;
  unsigned int V=0;

   if(LowBattStartup==1){
          Glcd_Write_Text("CHECK BATTERY ",25,3,1);
          return;
   }
   
     if(CHARGER.Load==OFF){
        if(LTC2943.PrevBattLevel!=LTC2943.BattLevel){
          LTC2943.PrevBattLevel =LTC2943.BattLevel;
          Glcd_Fill(0);
          Glcd_Write_Text("LOW BATTERY CUT-OFF",7,2,1);
          Glcd_Write_Text("Recharge Battery",15,5,1);
          Glcd_PartialImage(POS_BATTERY_X_START,POS_BATTERY_Y_START , IMAGE_BATTERY_WIDTH, IMAGE_BATTERY_HEIGHT, IMAGE_BATTERY_WIDTH, IMAGE_BATTERY_HEIGHT, &batt_level);
          Glcd_PartialImage(POS_BAR_X_START,POS_BAR_Y_START , 39, 8, 39, 8,&BLx[LTC2943.BattLevel][0]);
        }
        return;
     }
   


  if(LTC2943.PrevBattLevel!=LTC2943.BattLevel){
     LTC2943.PrevBattLevel =LTC2943.BattLevel;
     Glcd_PartialImage(POS_INFO_X_START,POS_INFO_Y_START , IMAGE_INFO_WIDTH, IMAGE_INFO_HEIGHT, IMAGE_INFO_WIDTH, IMAGE_INFO_HEIGHT, &Info16x16);
     Glcd_PartialImage(POS_LED_X_START,POS_LED_Y_START , IMAGE_LED_WIDTH, IMAGE_LED_HEIGHT, IMAGE_LED_WIDTH, IMAGE_LED_HEIGHT, &LED31x16);       Glcd_PartialImage(POS_BATTERY_X_START,POS_BATTERY_Y_START , IMAGE_BATTERY_WIDTH, IMAGE_BATTERY_HEIGHT, IMAGE_BATTERY_WIDTH, IMAGE_BATTERY_HEIGHT, &batt_level);
     Glcd_PartialImage(POS_BAR_X_START,POS_BAR_Y_START , 39, 8, 39, 8,&BLx[LTC2943.BattLevel][0]);
     if(CHARGER.LED==ON){
          Glcd_PartialImage(POS_UPDN_X_START,POS_UPDN_Y_START, IMAGE_UPDN_WIDTH, IMAGE_UPDN_HEIGHT, IMAGE_UPDN_WIDTH, IMAGE_UPDN_HEIGHT, &UPDN16x32);
     }else{
         Glcd_PartialImage(POS_UPDN_X_START,POS_UPDN_Y_START, IMAGE_UPDN_WIDTH, IMAGE_UPDN_HEIGHT, IMAGE_UPDN_WIDTH, IMAGE_UPDN_HEIGHT, &BLANK_UPDN16x32);
     }
  
  }
  if(LTC2943.BattLevel>10){
    LTC2943.BattLevel=10;
    //return;      //commented because the LOAD bar disappears
  }
  pos=LTC2943.BattLevel;
  if(LTC2943.Direction==CHARGING){
      Glcd_Write_Text("LOAD",2,6,1);
      Glcd_PartialImage(POS_LOAD_X_START,POS_LOAD_Y_START , IMAGE_LOAD_WIDTH, IMAGE_LOAD_HEIGHT, IMAGE_LOAD_WIDTH, IMAGE_LOAD_HEIGHT, &LOAD[0][0]);
      Glcd_Write_Text(" Full:04Hrs",62,7,1);
      
      
  }else{
      LTC2943.PrevBattLevel =LTC2943.BattLevel;
      Glcd_PartialImage(POS_BATTERY_X_START,POS_BATTERY_Y_START , IMAGE_BATTERY_WIDTH, IMAGE_BATTERY_HEIGHT, IMAGE_BATTERY_WIDTH, IMAGE_BATTERY_HEIGHT, &batt_level);
      Glcd_PartialImage(POS_BAR_X_START,POS_BAR_Y_START , 39, 8, 39, 8,&BLx[LTC2943.BattLevel][0]);
      if(CHARGER.InverterType==0x02){
         pos=(unsigned char)(LTC2943.BatteryCurrent/1000);
      }else{
         pos=(unsigned char)(LTC2943.BatteryCurrent/500);
      }
      if(pos>5) pos=5;
      Glcd_Write_Text("LOAD",2,6,1);
      Glcd_PartialImage(POS_LOAD_X_START,POS_LOAD_Y_START , IMAGE_LOAD_WIDTH, IMAGE_LOAD_HEIGHT, IMAGE_LOAD_WIDTH, IMAGE_LOAD_HEIGHT, &LOAD[pos][0]);
      Glcd_Write_Text("Empty:10Hrs",62,7,1);
  }

}



/****************************************************************************
FUNCTION: DiplayPercentageVolts

DESCRIPTION:
    Function to display battery percentage or BATTERY voltage on DISPLAY

ARGUMENTS:

   unsigned int value           The value being displayed(Voltage/percentage)
   unsigned char parameter      Parameter type (0=Percentage,1=Voltage)
RETURN VALUE:

    NONE


PRE-CONDITIONS:
   NONE

POST-CONDITIONS:
    NONE

IMPORTANT NOTES:
   None


*****************************************************************************/


void DiplayPercentageVolts(unsigned int value,unsigned char parameter ){
unsigned char txt[5];

  if((LowBattStartup==1)||(CHARGER.Load==OFF)){
    return;
  }
  if((LTC2943.BatteryVoltage<BATT_MINIMUM_VOLTAGE)||(LTC2943.BatteryVoltage>BATT_MAXIMUM_VOLTAGE)){
    return;
  }


  if(parameter==0){
     if(value<=100){
       Long2DigitsPad(txt,value,3,0x0a);
       if(value==0){
          txt[2]=0;
       }
       if(value<100){
         Glcd_PartialImage(POS_VOLTAGE_X_START,POS_PERCENT_Y_START , 8, 16,8, 16,&LargeFont80x16[0x0a][0]);
       }
       Glcd_PartialImage(POS_PERCENT_X_START,POS_PERCENT_Y_START , 8, 16,8, 16,&LargeFont80x16[txt[0]][0]);
       Glcd_PartialImage((POS_PERCENT_X_START+8),POS_PERCENT_Y_START,  8, 16,8, 16,&LargeFont80x16[txt[1]][0]);
       Glcd_PartialImage((POS_PERCENT_X_START+16),POS_PERCENT_Y_START , 8, 16,8, 16,&LargeFont80x16[txt[2]][0]);
       Glcd_PartialImage((POS_PERCENT_X_START+24),POS_PERCENT_Y_START , 8, 16,8, 16,&LargeFont80x16[0x0c][0]);      //%
       Glcd_PartialImage((POS_PERCENT_X_START+32),POS_PERCENT_Y_START , 8, 16,8, 16,&LargeFont80x16[0x0a][0]);      //blank
      }

  }else if (parameter==1){
       Long2DigitsPad(txt,value,3,0x0);
       if(value==0){
          txt[2]=0;
       }
       if(value<100){
         Glcd_PartialImage(POS_VOLTAGE_X_START,POS_PERCENT_Y_START , 8, 16,8, 16,&LargeFont80x16[0x0a][0]);
       }
       Glcd_PartialImage( POS_VOLTAGE_X_START,POS_PERCENT_Y_START , 8, 16,8, 16,&LargeFont80x16[txt[0]][0]);
       Glcd_PartialImage((POS_VOLTAGE_X_START+8),POS_PERCENT_Y_START , 8, 16,8, 16,&LargeFont80x16[txt[1]][0]);
       Glcd_PartialImage((POS_VOLTAGE_X_START+16),POS_PERCENT_Y_START , 8, 16,8, 16,&LargeFont80x16[0x0b][0]);      //dp
       Glcd_PartialImage((POS_VOLTAGE_X_START+24),POS_PERCENT_Y_START , 8, 16,8, 16,&LargeFont80x16[txt[2]][0]);
       Glcd_PartialImage((POS_VOLTAGE_X_START+32),POS_PERCENT_Y_START , 8, 16,8, 16,&LargeFont80x16[0x0d][0]);      //Volts

  }
}


/****************************************************************************
FUNCTION: DisplayBattery

DESCRIPTION:
    Function to display battery status on LCD

ARGUMENTS:

     NONE
RETURN VALUE:

    NONE


PRE-CONDITIONS:
   NONE

POST-CONDITIONS:
    NONE

IMPORTANT NOTES:
   None


*****************************************************************************/
void DisplayBatteryDetails(unsigned char MenuState){
unsigned int V;
unsigned long lValue=0;
  if(PrevMenuState!=MenuState){
    PrevMenuState=MenuState;
    Glcd_PartialImage(POS_BATT_MENU_X_START,POS_BATT_MENU_Y_START , 120,35,120,35, &Battinfo1);
    Glcd_Write_Text("To Full :", (POS_BATT_MENU_X_START+2), 3, 2) ;
    Glcd_Write_Text("Voltage :", (POS_BATT_MENU_X_START+2), 4, 2) ;
    Glcd_Write_Text("To Empty:", (POS_BATT_MENU_X_START+2), 5, 2) ;
    Glcd_Write_Text("Amps Out:", (POS_BATT_MENU_X_START+2), 6, 2) ;
  }
  Glcd_Write_Text("000Hrs", POS_BATT_MENU_TXT_START, 3, 1) ;
  V=LTC2943.BatteryVoltage;
  Value2Parameter(txt,V,5, 'V');
  Glcd_Write_Text((unsigned char*)txt,POS_BATT_MENU_TXT_START, 4, 1);
  Glcd_Write_Text("000Hrs", POS_BATT_MENU_TXT_START, 5, 1) ;
  
  lValue=(Rmultiplier)*(LTC2943.Current);
  lValue=(lValue/0x7FFF);
  V=(unsigned int)lValue;
  Value2Parameter2(txt,V,6, 'A');
  Glcd_Write_Text(txt, POS_BATT_MENU_TXT_START, 6, 1) ;
}

/****************************************************************************
FUNCTION: Display_Source

DESCRIPTION:
    Function to display source status on LCD. It shows either Solar/Car or wall Adaptor

ARGUMENTS:

     NONE
RETURN VALUE:

    NONE


PRE-CONDITIONS:
   NONE

POST-CONDITIONS:
    NONE

IMPORTANT NOTES:
   None


*****************************************************************************/

void DisplaySource(){
  unsigned int W;
   if(CHARGER.Source==SOURCE_SOLAR){
         Glcd_PartialImage(POS_SOURCE_X_START,POS_SOURCE_Y_START , IMAGE_SOURCE_WIDTH, IMAGE_SOURCE_HEIGHT, IMAGE_SOURCE_WIDTH, IMAGE_SOURCE_HEIGHT, &SOLAR_31x16);
   }else if(CHARGER.Source==SOURCE_CAR){
         Glcd_PartialImage(POS_SOURCE_X_START,POS_SOURCE_Y_START , IMAGE_SOURCE_WIDTH, IMAGE_SOURCE_HEIGHT, IMAGE_SOURCE_WIDTH, IMAGE_SOURCE_HEIGHT, &CAR_31x16);
   }else if(CHARGER.Source==SOURCE_MAINS){
         Glcd_PartialImage(POS_SOURCE_X_START,POS_SOURCE_Y_START , IMAGE_SOURCE_WIDTH, IMAGE_SOURCE_HEIGHT, IMAGE_SOURCE_WIDTH, IMAGE_SOURCE_HEIGHT, &MAINS_31x16);
   }else{
         Glcd_PartialImage(POS_SOURCE_X_START,POS_SOURCE_Y_START , IMAGE_SOURCE_WIDTH, IMAGE_SOURCE_HEIGHT, IMAGE_SOURCE_WIDTH, IMAGE_SOURCE_HEIGHT, &OFF_31x16);
         Glcd_PartialImage((POS_SOURCE_X_END+2),0 , 7, 16, 7, 16, &CHARGE_B_7x16);
   }


}






void ClearSourceDisplay(){
     Glcd_PartialImage(POS_SOURCE_X_START,POS_SOURCE_Y_START , IMAGE_SOURCE_WIDTH, IMAGE_SOURCE_HEIGHT, IMAGE_SOURCE_WIDTH, IMAGE_SOURCE_HEIGHT, &OFF_31x16);
     Glcd_PartialImage(POS_MPPT_X_START,POS_SOURCE_Y_START , IMAGE_MPPT_WIDTH, IMAGE_SOURCE_HEIGHT, IMAGE_MPPT_WIDTH, IMAGE_SOURCE_HEIGHT, &CLEAR_MPPT_31x12);
     Glcd_PartialImage((POS_SOURCE_X_END+2),0 , 7, 16, 7, 16, &CHARGE_B_7x16);
}
/****************************************************************************
FUNCTION: DisplaySourceDetails

DESCRIPTION:
    Function to display source details on LCD. It shows voltages/currents mode/errors

ARGUMENTS:

     NONE
RETURN VALUE:

    NONE


PRE-CONDITIONS:
   NONE

POST-CONDITIONS:
    NONE

IMPORTANT NOTES:
   None


*****************************************************************************/


 void DisplaySourceDetails(unsigned char MenuState){
unsigned int V,W;
float lValue=0;

     if(LTC2943.PrevDirection!=LTC2943.Direction){
       LTC2943.PrevDirection=LTC2943.Direction;
       PrevMenuState=0xFA;
     }

     if(PrevMenuState!=MenuState){
       PrevMenuState=MenuState;
       Glcd_PartialImage(2,4 , 124,56, 124, 56, &iINFO124X56);

       Glcd_Write_Text("Volts In  : ", 5, 1, 2) ;
       Glcd_Write_Text("Watts In  : ", 5, 2, 2) ;
       Glcd_Write_Text("Stage     : ", 5, 3, 2) ;
       Glcd_Write_Text("BATT Volts: ", 5, 4, 2) ;

        if(LTC2943.Direction==CHARGING){
          Glcd_Write_Text("Full      : ", 5, 5, 2) ;
          Glcd_Write_Text("Amps In   : ", 5, 6, 2) ;

        }else{
        Glcd_Write_Text("Empty     : ", 5, 5, 2) ;
        Glcd_Write_Text("Amps Out  : ", 5, 6, 2) ;
        }
     }


     if(CHARGER.Source==SOURCE_MAINS){
         V=CHARGER.DCWall/10;
     }else{
          V=CHARGER.Vin/10;
     }
     Value2Parameter(txt,V,5, 'V');
     Glcd_Write_Text((unsigned char*)txt,75,1,1);
     W= CHARGER.Iin;  //Calculate Input watts from Vin*Iin(Both are *10)
     W*=V;
     W/=100;
     Long2AsciiPad(txt,W,3,'0');
     txt[3]='W';
     txt[4]=0;
     Glcd_Write_Text((unsigned char*)txt,75,2,1);

     Glcd_Write_Text((unsigned char*)STATUS_MSG[Charger.ChargerState],75,3,1);


     V=LTC2943.BatteryVoltage;
     Value2Parameter(txt,V,5, 'V');
     Glcd_Write_Text((unsigned char*)txt,75,4,1);


      Glcd_Write_Text("10 Hrs ", 75, 5, 1) ;
      Value2Parameter2(txt,LTC2943.BatteryCurrent,6, 'A');
      Glcd_Write_Text((unsigned char*)txt,75,6,1);
}

/****************************************************************************
FUNCTION: DisplayCharging

DESCRIPTION:
    Function to display animated charging icon. ChargeSize decides the icon, ChargeSize=0 for blank

ARGUMENTS:

     NONE
     
RETURN VALUE:

    NONE


PRE-CONDITIONS:
   NONE

POST-CONDITIONS:
    NONE

IMPORTANT NOTES:
   None


*****************************************************************************/
void DisplayCharging(){

    switch(ChargeSize){

      case 1:
          Glcd_PartialImage((POS_SOURCE_X_END+2),0 , 7, 16, 7, 16, &CHARGE_B_7x16);
      break;

      case 2:
          Glcd_PartialImage((POS_SOURCE_X_END+2),0 , 7, 16, 7, 16, &CHARGE_M_7x16);
       break;
      case 3:
          Glcd_PartialImage((POS_SOURCE_X_END+2),0 , 7, 16, 7, 16, &CHARGE_B_7x16);
      break;

      default:
           Glcd_PartialImage((POS_SOURCE_X_END+2),0 , 7, 16, 7, 16, &CHARGE_M_7x16);
           ChargeSize=0;
      break;
    }


}



 /****************************************************************************
FUNCTION: DisplayTime

DESCRIPTION:
    Function to display charging/discharging time left. Hourglass symbol and time

ARGUMENTS:

     NONE
RETURN VALUE:

    NONE


PRE-CONDITIONS:
   NONE

POST-CONDITIONS:
    NONE

IMPORTANT NOTES:
   None


*****************************************************************************/

void DisplayTime(){

 Glcd_PartialImage(80,5 , 18, 24, 18, 24, &Time_18x24);

}







/****************************************************************************
FUNCTION: DisplayHomeScreen

DESCRIPTION:
    Function to display default screen. All the default parameters are displayed calling individual display functions.

ARGUMENTS:
    NONE
    
RETURN VALUE:

    NONE


PRE-CONDITIONS:
   All the devices must be enabled so that the data required for the display is available

POST-CONDITIONS:
    NONE

IMPORTANT NOTES:
   Can be called to erase all the previous messages and show default screen(especially to erase a secondary display).


*****************************************************************************/

void DisplayHomeScreen(){
   Glcd_Fill(0);                                    // Clear GLCD
   LTC2943.PrevBattLevel=99;                        //Battery level is updated only when new level is different from prev

   //DisplayCharging();                             // Display charging symbol(animated)
  if(PercentVoltFlag==0){
       DiplayPercentageVolts(LTC2943.BattPercent,0);
  }else{
      DiplayPercentageVolts(LTC2943.BatteryVoltage,1);
  }

  DisplaySource();                                  // Display the charger power source
  DisplayBattery();
  PrevMenuState=0xff;

}